# Only define providers here. Nixpacks will handle the heavy lifting.
providers = ["node", "python"]

[phases.build]
 # Combine both install steps here to ensure they happen in the right order
cmds = [
  "npm install",
  "npm run build",
  "python -m venv /opt/venv && . /opt/venv/bin/activate && pip install -r requirements.txt"
]

[start]
cmd = "node dist/index.js gateway start"